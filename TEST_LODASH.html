<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lodash CDN æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 6px;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Lodash CDN æµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>CDN URL æµ‹è¯•</h2>
        <div id="cdn-test-results"></div>
        
        <h3>æµ‹è¯•çš„CDN URL:</h3>
        <ul>
            <li>âœ… <strong>æ­£ç¡®URL</strong>: https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js</li>
            <li>âŒ <strong>é”™è¯¯URL</strong>: https://unpkg.com/lodash@4.17.21/dist/index.umd.js</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>Lodash åŠŸèƒ½æµ‹è¯•</h2>
        <button class="test-button" onclick="testLodashFunctions()">ğŸ§ª æµ‹è¯• Lodash åŠŸèƒ½</button>
        <div id="lodash-test-results"></div>
    </div>

    <div class="test-section">
        <h2>å…¶ä»–CDNæµ‹è¯•</h2>
        <button class="test-button" onclick="testOtherCDNs()">ğŸ”— æµ‹è¯•å…¶ä»–åŒ…çš„CDN</button>
        <div id="other-cdn-results"></div>
    </div>

    <!-- åŠ è½½æ­£ç¡®çš„ Lodash CDN -->
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    
    <script>
        // æµ‹è¯•CDN URLå¯è®¿é—®æ€§
        async function testCDNUrls() {
            const urls = [
                {
                    name: 'æ­£ç¡®çš„ Lodash URL (jsdelivr)',
                    url: 'https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js',
                    shouldWork: true
                },
                {
                    name: 'é”™è¯¯çš„ Lodash URL (unpkg)',
                    url: 'https://unpkg.com/lodash@4.17.21/dist/index.umd.js',
                    shouldWork: false
                }
            ];

            const resultsDiv = document.getElementById('cdn-test-results');
            resultsDiv.innerHTML = '<p>æ­£åœ¨æµ‹è¯•CDN URL...</p>';

            let results = '';
            
            for (const test of urls) {
                try {
                    const response = await fetch(test.url, { method: 'HEAD' });
                    const success = response.ok;
                    const status = success ? 'âœ… å¯è®¿é—®' : 'âŒ ä¸å¯è®¿é—®';
                    const cssClass = success ? 'success' : 'error';
                    
                    results += `
                        <div class="test-result ${cssClass}">
                            <strong>${test.name}</strong><br>
                            URL: ${test.url}<br>
                            çŠ¶æ€: ${status} (${response.status})
                        </div>
                    `;
                } catch (error) {
                    results += `
                        <div class="test-result error">
                            <strong>${test.name}</strong><br>
                            URL: ${test.url}<br>
                            çŠ¶æ€: âŒ ç½‘ç»œé”™è¯¯ - ${error.message}
                        </div>
                    `;
                }
            }
            
            resultsDiv.innerHTML = results;
        }

        // æµ‹è¯• Lodash åŠŸèƒ½
        function testLodashFunctions() {
            const resultsDiv = document.getElementById('lodash-test-results');
            
            if (typeof _ === 'undefined') {
                resultsDiv.innerHTML = `
                    <div class="test-result error">
                        âŒ Lodash æœªåŠ è½½ï¼è¯·æ£€æŸ¥CDN URLæ˜¯å¦æ­£ç¡®ã€‚
                    </div>
                `;
                return;
            }

            try {
                // æµ‹è¯•å„ç§ Lodash åŠŸèƒ½
                const tests = [
                    {
                        name: 'æ•°ç»„æ‰“ä¹± (_.shuffle)',
                        test: () => _.shuffle([1, 2, 3, 4, 5]),
                        expected: 'é•¿åº¦ä¸º5çš„æ•°ç»„'
                    },
                    {
                        name: 'æ•°ç»„å»é‡ (_.uniq)',
                        test: () => _.uniq([1, 2, 2, 3, 3, 4]),
                        expected: '[1, 2, 3, 4]'
                    },
                    {
                        name: 'æ·±å…‹éš† (_.cloneDeep)',
                        test: () => _.cloneDeep({a: {b: 1}}),
                        expected: 'æ·±æ‹·è´å¯¹è±¡'
                    },
                    {
                        name: 'é˜²æŠ–å‡½æ•° (_.debounce)',
                        test: () => typeof _.debounce(() => {}, 100),
                        expected: 'function'
                    },
                    {
                        name: 'å¯¹è±¡æŒ‰å±æ€§æ’åº (_.sortBy)',
                        test: () => _.sortBy([{a: 2}, {a: 1}], 'a'),
                        expected: 'æŒ‰aå±æ€§æ’åºçš„æ•°ç»„'
                    }
                ];

                let results = '<div class="test-result success">âœ… Lodash åŠ è½½æˆåŠŸï¼ç‰ˆæœ¬: ' + _.VERSION + '</div>';
                
                tests.forEach(test => {
                    try {
                        const result = test.test();
                        results += `
                            <div class="test-result success">
                                âœ… <strong>${test.name}</strong><br>
                                ç»“æœ: <code>${JSON.stringify(result)}</code><br>
                                é¢„æœŸ: ${test.expected}
                            </div>
                        `;
                    } catch (error) {
                        results += `
                            <div class="test-result error">
                                âŒ <strong>${test.name}</strong><br>
                                é”™è¯¯: ${error.message}
                            </div>
                        `;
                    }
                });

                resultsDiv.innerHTML = results;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="test-result error">
                        âŒ æµ‹è¯•è¿‡ç¨‹å‡ºé”™: ${error.message}
                    </div>
                `;
            }
        }

        // æµ‹è¯•å…¶ä»–åŒ…çš„CDN
        async function testOtherCDNs() {
            const resultsDiv = document.getElementById('other-cdn-results');
            resultsDiv.innerHTML = '<p>æ­£åœ¨æµ‹è¯•å…¶ä»–åŒ…çš„CDN URL...</p>';

            const packages = [
                {
                    name: 'axios',
                    url: 'https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js'
                },
                {
                    name: 'moment',
                    url: 'https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js'
                },
                {
                    name: 'uuid',
                    url: 'https://cdn.jsdelivr.net/npm/uuid@9.0.1/dist/umd/uuid.min.js'
                }
            ];

            let results = '';
            
            for (const pkg of packages) {
                try {
                    const response = await fetch(pkg.url, { method: 'HEAD' });
                    const success = response.ok;
                    const status = success ? 'âœ… å¯è®¿é—®' : 'âŒ ä¸å¯è®¿é—®';
                    const cssClass = success ? 'success' : 'error';
                    
                    results += `
                        <div class="test-result ${cssClass}">
                            <strong>${pkg.name}</strong><br>
                            URL: ${pkg.url}<br>
                            çŠ¶æ€: ${status}
                        </div>
                    `;
                } catch (error) {
                    results += `
                        <div class="test-result error">
                            <strong>${pkg.name}</strong><br>
                            URL: ${pkg.url}<br>
                            çŠ¶æ€: âŒ ç½‘ç»œé”™è¯¯
                        </div>
                    `;
                }
            }
            
            resultsDiv.innerHTML = results;
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æµ‹è¯•CDN
        window.addEventListener('load', () => {
            testCDNUrls();
            
            // æ£€æŸ¥ Lodash æ˜¯å¦å·²åŠ è½½
            setTimeout(() => {
                if (typeof _ !== 'undefined') {
                    document.getElementById('lodash-test-results').innerHTML = `
                        <div class="test-result success">
                            âœ… Lodash è‡ªåŠ¨åŠ è½½æˆåŠŸï¼ç‰ˆæœ¬: ${_.VERSION}<br>
                            ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®è¿›è¡ŒåŠŸèƒ½æµ‹è¯•
                        </div>
                    `;
                } else {
                    document.getElementById('lodash-test-results').innerHTML = `
                        <div class="test-result error">
                            âŒ Lodash æœªè‡ªåŠ¨åŠ è½½ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥
                        </div>
                    `;
                }
            }, 1000);
        });
    </script>
</body>
</html> 